# Data Model: RAG Ingestion Pipeline

**Date**: 2025-12-22

This document defines the data model for the content chunks stored in the Qdrant vector database.

## Entity: `DocumentChunk`

A `DocumentChunk` represents a piece of text extracted from a source URL, which is then embedded and stored for retrieval.

### Fields

| Field Name     | Data Type               | Description                                                                                             |
|----------------|-------------------------|---------------------------------------------------------------------------------------------------------|
| `id`           | `string` (UUID/Hash)    | A unique identifier for the chunk, typically a hash of the content or a combination of URL and chunk index. |
| `source_url`   | `string`                | The URL of the source document from which the chunk was extracted.                                      |
| `text`         | `string`                | The actual text content of the chunk.                                                                   |
| `embedding`    | `array[float]`          | The dense vector embedding of the `text`, generated by the Cohere model.                                |
| `last_updated` | `datetime` (ISO 8601)   | The timestamp when the chunk was last ingested or updated.                                              |
| `checksum`     | `string` (e.g., SHA256) | A checksum of the `text` content, used to detect changes during incremental updates.                    |

### Relationships

- A `DocumentChunk` belongs to one **Source Document** (identified by `source_url`).
- Many `DocumentChunk` entities can be derived from a single **Source Document**.

### State Transitions

A `DocumentChunk` can be in one of the following states in the vector database:
- **Created**: The initial state when a chunk is first ingested.
- **Updated**: The state after a chunk's content (and therefore its embedding) is modified during an incremental update.
- **Stale/Deleted**: If the source URL or content is removed, the corresponding chunks are deleted from the database.
